"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2940],{22940:(e,s,n)=>{n.d(s,{J:()=>z,H:()=>k});var r=n(9329),t=n(6029),i=n(83150),l=n(83007),o=n(78046),c=n(43697),a=n(3066),d=n(26277),h=n(93955),x=n(91232),j=n(96331),u=n(30626),p=n(40264),m=n(56329),g=n(33658),y=n(87931),f=n(42932);n(55729);var v=n(3102),b=n(38584),R=n(44263),w=n(85725),D=n(25909);let _={configuration:"Configuration",uses:"Uses"},I=e=>{let{repoAddress:s,resourceName:n,numUses:r}=e,l=(0,v.W5)(["/locations/:repoPath/resources/:name/:tab?"]),o=(null==l?void 0:l.params.tab)&&_[null==l?void 0:l.params.tab]||"Configuration";return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(R.tU,{size:"large",selectedTabId:o,children:[(0,t.jsx)(w.s,{id:"Configuration",title:"Configuration",to:(0,D.HG)(s,"/resources/".concat(n))},"configuration"),(0,t.jsx)(w.s,{id:"Uses",title:(0,t.jsxs)(i.a,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,t.jsx)(d.v,{intent:"none",minimal:!0,children:r})]}),to:(0,D.HG)(s,"/resources/".concat(n,"/uses"))},"uses")]})})};var U=n(85347),E=n(21403),N=n(25217),S=n(32857),O=n(5125),T=n(56808),A=n(1613),L=n(87104),W=n(71519),H=n(61803);function V(){let e=(0,r._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      jobName\n      opHandleIDs\n    }\n    resourceType\n  }\n"]);return V=function(){return e},e}function C(){let e=(0,r._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}let F=e=>"StringSourceType"===e?"String":"IntSourceType"===e?"Int":"BoolSourceType"===e?"Bool":e,k=e=>(null==e?void 0:e.split(".").pop())||null,P=e=>e?e.name.startsWith("_nested_")?k(null==e?void 0:e.resourceType):e.name:null,G=e=>(0,t.jsx)(i.a,{padding:{left:24,vertical:16},background:l.GW(),border:"all",children:e.children}),K=e=>e.split("\n").map(e=>e.replace(/^    /,"")).join("\n"),z=e=>{var s,n,r,m;(0,S.b7)();let{repoAddress:g}=e,{resourceName:y}=(0,v.g)();(0,T.r)("Resource: ".concat(y));let f={...(0,H.n)(g),resourceName:y},b=(0,U.IT)(M,{variables:{resourceSelector:f}}),R=(null==(s=b.data)?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&P(null==(n=b.data)?void 0:n.topLevelResourceDetailsOrError)||y,w=(null==(r=b.data)?void 0:r.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?b.data.topLevelResourceDetailsOrError.parentResources.length+b.data.topLevelResourceDetailsOrError.assetKeysUsing.length+b.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+b.data.topLevelResourceDetailsOrError.schedulesUsing.length+b.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,D=null==(m=(0,v.W5)(["/locations/:repoPath/resources/:name/:tab?"]))?void 0:m.params.tab;return(0,t.jsxs)(o.Y,{style:{height:"100%",overflow:"hidden"},children:[(0,t.jsx)(c.z,{title:(0,t.jsx)(a.M7,{children:R}),tags:(0,t.jsxs)(d.v,{icon:"resource",children:["Resource in ",(0,t.jsx)(A.p,{repoAddress:g})]}),tabs:(0,t.jsx)(I,{repoAddress:g,resourceName:y,numUses:w})}),(0,t.jsx)(L.R,{queryResult:b,allowStaleData:!0,children:e=>{let{topLevelResourceDetailsOrError:s}=e;if("ResourceDetails"!==s.__typename){let e=null;return"PythonError"===s.__typename&&(e=s.message),(0,t.jsx)(h.F,{intent:"warning",title:(0,t.jsxs)(x.Y,{direction:"row",spacing:4,children:[(0,t.jsx)("div",{children:"Could not load resource."}),e&&(0,t.jsx)(j.v,{color:l.Hv(),underline:"always",onClick:()=>{(0,E.vI)({title:"Python error",body:e})},children:"View error"})]})})}let n=k(s.resourceType);return(0,t.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,t.jsx)(u.c,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,t.jsx)(i.a,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===D?(0,t.jsx)(X,{resourceDetails:s,repoAddress:g,numUses:w}):(0,t.jsx)(J,{resourceDetails:s,repoAddress:g})}),second:(0,t.jsxs)(i.a,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,t.jsxs)(i.a,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,t.jsx)(a.DZ,{children:R}),(0,t.jsx)(p.m,{content:s.resourceType||"",children:(0,t.jsx)(a.Kp,{children:n})})]}),(0,t.jsx)(i.a,{border:"top-and-bottom",background:l.GW(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,t.jsx)(i.a,{padding:{horizontal:24,vertical:16},children:s.description?(0,t.jsx)(W.o,{children:K(s.description)}):"None"})]})})})}})]})},J=e=>{let{resourceDetails:s,repoAddress:n}=e,r=Object.fromEntries(s.configuredValues.map(e=>[e.key,{value:e.value,type:e.type}])),o=s.nestedResources;return(0,t.jsxs)(t.Fragment,{children:[o.length>0&&(0,t.jsxs)(i.a,{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:"Resource dependencies"})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:120},children:"Key"}),(0,t.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,t.jsx)("tbody",{children:o.map(e=>{let s="TOP_LEVEL"===e.type&&e.resource?(0,t.jsx)(Y,{url:(0,D.HG)(n,"/resources/".concat(e.name)),name:P(e.resource)||"",description:e.resource.description||void 0},e.name):(0,t.jsx)(Y,{name:e.name},e.name);return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)("strong",{children:e.name})}),(0,t.jsx)("td",{colSpan:2,children:s})]},e.name)})})]})]}),(0,t.jsxs)(i.a,{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:"Configuration"})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{style:{width:120},children:"Key"}),(0,t.jsx)("th",{style:{width:90},children:"Type"}),(0,t.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,t.jsx)("tbody",{children:0===s.configFields.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,children:(0,t.jsx)(i.a,{padding:{vertical:8},children:(0,t.jsx)(g.I,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):s.configFields.map(e=>{let s=e.defaultValueAsJson,n=r.hasOwnProperty(e.name)?r[e.name].type:null,o=r.hasOwnProperty(e.name)?r[e.name].value:s,c="VALUE"===n&&s===o;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(i.a,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,t.jsx)("strong",{children:e.name}),(0,t.jsx)("div",{style:{fontSize:12,color:l.XN()},children:e.description})]})}),(0,t.jsx)("td",{children:F(e.configTypeKey)}),(0,t.jsx)("td",{children:(0,t.jsxs)(i.a,{flex:{direction:"row",gap:16},children:[(0,t.jsx)(p.m,{content:(0,t.jsxs)(t.Fragment,{children:["Default: ",s]}),canShow:!c&&!!s,children:"ENV_VAR"===n?(0,t.jsx)(d.v,{children:o}):o}),c&&(0,t.jsx)(d.v,{children:"Default"}),"ENV_VAR"===n&&(0,t.jsx)(d.v,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},X=e=>{let{resourceDetails:s,repoAddress:n,numUses:r}=e;if(0===r)return(0,t.jsx)(i.a,{padding:{vertical:16},children:(0,t.jsx)(g.I,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});let o=s.parentResources;return(0,t.jsxs)(t.Fragment,{children:[o.length>0&&(0,t.jsxs)(i.a,{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:"Parent resources"})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Resource"})})}),(0,t.jsx)("tbody",{children:o.map(e=>e.resource&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)(Y,{url:(0,D.HG)(n,"/resources/".concat(e.resource.name)),name:P(e.resource)||"",description:e.resource.description||void 0})})},e.resource.name))})]})]}),s.assetKeysUsing.length>0&&(0,t.jsxs)(i.a,{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:"Assets"})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Asset key"})})}),(0,t.jsx)("tbody",{children:s.assetKeysUsing.map(e=>(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsx)(O.H,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/")))})]})]}),s.jobsOpsUsing.length>0&&(0,t.jsxs)(i.a,{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:"Jobs"})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Job name"}),(0,t.jsx)("th",{children:"Ops"})]})}),(0,t.jsx)("tbody",{children:s.jobsOpsUsing.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.In,{name:"job",color:l.fR()}),(0,t.jsx)(b.N_,{to:(0,D.HG)(n,"/jobs/".concat(e.jobName)),children:(0,t.jsx)(f.A,{text:e.jobName})})]})}),(0,t.jsx)("td",{children:(0,t.jsx)(i.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opHandleIDs.map(s=>(0,t.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.In,{name:"op",color:l.fR()}),(0,t.jsx)(b.N_,{to:(0,D.HG)(n,"/jobs/".concat(e.jobName,"/").concat(s.split(".").join("/"))),children:(0,t.jsx)(f.A,{text:s})})]},s))})})]},e.jobName))})]})]}),[{name:"Schedules",objects:s.schedulesUsing,icon:(0,t.jsx)(y.In,{name:"schedule",color:l.fR()})},{name:"Sensors",objects:s.sensorsUsing,icon:(0,t.jsx)(y.In,{name:"sensors",color:l.fR()})}].filter(e=>{let{objects:s}=e;return s.length>0}).map(e=>{let{name:s,objects:r,icon:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(G,{children:(0,t.jsx)(a.R2,{children:s})}),(0,t.jsxs)(m.X,{children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:(0,t.jsx)("th",{children:"Name"})})}),(0,t.jsx)("tbody",{children:r.map(e=>(0,t.jsx)("tr",{children:(0,t.jsx)("td",{children:(0,t.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[l,(0,t.jsx)(b.N_,{to:(0,D.HG)(n,"/".concat(s.toLowerCase(),"/").concat(e)),children:(0,t.jsx)(f.A,{text:e})})]})})},s+":"+e))})]})]},s)})]})},Y=e=>{let{url:s,name:n,description:r}=e;return(0,t.jsxs)(i.a,{flex:{direction:"column"},children:[(0,t.jsxs)(i.a,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,t.jsx)(y.In,{name:"resource",color:l.iZ()}),(0,t.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:s?(0,t.jsx)(b.N_,{to:s,style:{overflow:"hidden"},children:(0,t.jsx)(f.A,{text:n})}):(0,t.jsx)(f.A,{text:n})})]}),(0,t.jsx)(a.MC,{children:r})]})},q=(0,U.J1)(V()),M=(0,U.J1)(C(),q,N.z)}}]);
//# sourceMappingURL=2940.592aaf92bf547ae3.js.map