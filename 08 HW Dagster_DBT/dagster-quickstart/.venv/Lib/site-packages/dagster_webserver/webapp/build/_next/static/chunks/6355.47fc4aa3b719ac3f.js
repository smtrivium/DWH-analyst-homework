(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6355],{5356:(e,n,t)=>{"use strict";t.d(n,{A:()=>m});var s=t(6029),r=t(26277),o=t(83150),i=t(17970),l=t(55729),a=t(21897),c=t(66822),d=t(60845),u=t(92242),p=t(1546),h=t(89250),x=t(35171);let m=(0,l.memo)(e=>{let{name:n,run:t,showHover:m=!1,showButton:f=!0,showSummary:j=!0}=e,{status:g}=t,y=(0,l.useMemo)(()=>{switch(g){case c.i2_.SUCCESS:return"success";case c.i2_.CANCELED:case c.i2_.CANCELING:case c.i2_.FAILURE:return"danger";default:return"none"}},[g]);return(0,s.jsxs)(o.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start",gap:16},children:[(0,s.jsxs)(o.a,{flex:{direction:"column",alignItems:"flex-start",gap:4},children:[(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(()=>{let e=(0,s.jsx)(r.v,{intent:y,children:(0,s.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,s.jsx)(d.lQ,{status:t.status,size:10}),(0,s.jsx)(h.X4,{run:t})]})});return m?(0,s.jsx)(i.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(u._O,{run:t,name:n})}),hoverOpenDelay:100,children:e}):e})(),j?(0,s.jsx)(h.D1,{run:t}):null]}),j&&(p.ev.has(t.status)||p.Tk.has(t.status))?(0,s.jsx)(a.T,{runId:t.id}):void 0]}),f?(0,s.jsx)(x.A,{to:"/runs/".concat(t.id),children:"View run"}):null]})})},21897:(e,n,t)=>{"use strict";t.d(n,{T:()=>m});var s=t(9329),r=t(6029),o=t(3066),i=t(83007),l=t(97036),a=t.n(l),c=t(55729),d=t(38584),u=t(85347),p=t(66822),h=t(1546);function x(){let e=(0,s._)(["\n  query StepSummaryForRunQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        stepStats {\n          endTime\n          stepKey\n          status\n        }\n      }\n    }\n  }\n"]);return x=function(){return e},e}let m=e=>{let{runId:n}=e,{data:t}=(0,u.IT)(f,{variables:{runId:n}}),s=null==t?void 0:t.pipelineRunOrError,l=(null==s?void 0:s.__typename)==="Run"?s.status:null,x=(0,c.useMemo)(()=>{if((null==s?void 0:s.__typename)!=="Run")return[];let{status:e}=s;return h.ev.has(e)?s.stepStats.filter(e=>e.status===p.fWo.FAILURE):h.Tk.has(e)?s.stepStats.filter(e=>e.status===p.fWo.IN_PROGRESS):[]},[s]),m=x.length;if(!m||!l)return null;if(h.ev.has(l)){if(1===m){let e=x[0],t=e.endTime?a().stringify({focusedTime:Math.floor(1e3*e.endTime)},{addQueryPrefix:!0}):"";return(0,r.jsxs)(o.HL,{color:i.XN(),children:["Failed at ",(0,r.jsx)(d.N_,{to:"/runs/".concat(n).concat(t),children:e.stepKey})]})}return(0,r.jsxs)(o.HL,{color:i.XN(),children:["Failed at ",(0,r.jsxs)(d.N_,{to:"/runs/".concat(n),children:[m," steps"]})]})}if(h.Tk.has(l)){if(1===m){let e=x[0],t=e.endTime?a().stringify({focusedTime:Math.floor(1e3*e.endTime)},{addQueryPrefix:!0}):"";return(0,r.jsxs)(o.HL,{color:i.XN(),children:["In progress at ",(0,r.jsx)(d.N_,{to:"/runs/".concat(n).concat(t),children:e.stepKey})]})}return(0,r.jsxs)(o.HL,{color:i.XN(),children:["In progress at ",(0,r.jsxs)(d.N_,{to:"/runs/".concat(n),children:[m," steps"]})]})}return null},f=(0,u.J1)(x())},29745:(e,n,t)=>{"use strict";t.d(n,{K:()=>d});var s=t(6029),r=t(55729),o=t(57638),i=t(33763),l=t(32497),a=t(67402),c=t(64201);let d=function(){let{codeLocations:e,setCodeLocations:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codeLocations:void 0,setCodeLocations:void 0},{allRepos:t,visibleRepos:s,setVisible:o,setHidden:d}=(0,r.useContext)(i.zp),u=(0,r.useMemo)(()=>t.map(e=>(0,l.t8)(e.repository.name,e.repositoryLocation.name)),[t]),h=(0,r.useMemo)(()=>s.length===t.length?[]:s.map(e=>(0,l.t8)(e.repository.name,e.repositoryLocation.name)),[t,s]),x=(0,r.useCallback)(e=>{if(0===e.size)return void o(u);d(u.filter(n=>!e.has(n))),o(Array.from(e))},[u,d,o]);return(0,c.wj)({state:e||h,allValues:(0,r.useMemo)(()=>u.map(e=>({value:e,match:[(0,a.FC)(e)]})),[u]),onStateChanged:e=>{n?n(Array.from(e)):x(e)},menuWidth:"500px",...p})},u=e=>(0,a.FC)(e),p={name:"Code location",icon:"folder",renderLabel:e=>{let{value:n}=e;return(0,s.jsx)(o.lO,{text:(0,a.FC)(n)})},getStringValue:u,getKey:u}},36376:(e,n,t)=>{"use strict";t.d(n,{Jo:()=>R,gX:()=>A,yG:()=>k});var s=t(6029),r=t(83655),o=t(87931),i=t(91232),l=t(83150),a=t(55729),c=t(67479),d=t(1546),u=t(61365),p=t(89250),h=t(78882),x=t(46743),m=t(51249),f=t(83900),j=t(10308),g=t(99737),y=t(35029),b=t(66822),v=t(36809),w=t(39782),C=t(30868);let _=e=>{let{run:n}=e,{id:t,canTerminate:i}=n,[l,c]=(0,a.useState)(!1),d=(0,a.useCallback)(()=>c(!1),[]),u=(0,a.useCallback)(async e=>{let{errors:n}=e,s=t&&n[t];s&&"message"in s&&await (0,f.l)({message:s.message,icon:"error",intent:"danger"})},[t]);return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.$n,{icon:(0,s.jsx)(o.In,{name:"cancel"}),intent:"danger",disabled:l,onClick:()=>c(!0),children:"Terminate"}),(0,s.jsx)(h.B,{isOpen:l,onClose:d,onComplete:u,selectedRuns:{[t]:i}})]}):null};function I(e,n){let t=e.keys.map(e=>{var t;return e&&(null==(t=n.steps[e])?void 0:t.state)||c.VB.PREPARING});return{...e,present:e.keys.length>0,failed:e.keys.length&&t.includes(c.VB.FAILED),finished:t.every(e=>[c.VB.FAILED,c.VB.SUCCEEDED].includes(e))}}let k=e=>d.RD.has(e.status),A=e=>e.executionPlan&&d.ev.has(e.status),R=e=>{var n,t,r;let{metadata:o,graph:a,run:c}=e,h=(0,C.A)(c),f=(0,x.o)(c),{flagAssetRetries:R}=(0,j.h)(),L=null==c||null==(n=c.executionPlan)?void 0:n.artifactsPersisted,N=I(e.selection,o),E=function(e,n,t){let s=e.tags.find(e=>e.key===u.d.StepSelection);return s?I({keys:(0,g.Q)(n,s.value).all.map(e=>e.name),query:s.value},t):null}(c,a,o),F=null==(t=c.tags)?void 0:t.some(e=>e.key===u.d.IsResumeRetry&&"true"===e.value),T=(0,m.Q)(),M=async e=>{if(!c||!h||!c.pipelineSnapshotId)return;let n=(0,p.Pl)({run:c,selection:e,repositoryLocationName:h.match.repositoryLocation.name,repositoryName:h.match.repository.name});await T.onClick(c,n,!1)},J={icon:"cached",scope:"*",title:"All steps in root run",tooltip:"Re-execute the pipeline run from scratch. Shift-click to adjust tags.",disabled:!k(c),onClick:e=>T.onClick(c,b.Fnt.ALL_STEPS,e.shiftKey)},O={icon:"linear_scale",scope:(null==E?void 0:E.query)||"*",title:"Same steps",disabled:!E||!(E.finished||E.failed),tooltip:(0,s.jsxs)("div",{children:[E&&E.present?E.finished?"Re-execute the same step subset used for this run:":"Wait for all of the steps to finish to re-execute the same subset.":"Re-executes the same step subset used for this run if one was present.",(0,s.jsx)(S,{selection:E})]}),onClick:()=>M(E)},P={icon:"op",scope:N.query,title:N.keys.length>1?"Selected steps":"Selected step",disabled:!N.present||!(N.finished||N.failed),tooltip:(0,s.jsxs)("div",{children:[N.present?N.finished?"Re-execute the selected steps with existing configuration:":"Wait for the steps to finish to re-execute them.":"Select a step or type a step subset to re-execute.",(0,s.jsx)(S,{selection:N})]}),onClick:()=>M(N)},$={icon:"arrow_forward",title:"From selected",disabled:!k(c)||1!==N.keys.length,tooltip:"Re-execute the pipeline downstream from the selected steps.",onClick:async()=>{if(!c.executionPlan)return console.warn("Run execution plan must be present to launch from-selected execution"),Promise.resolve();let e=N.keys.map(e=>"".concat(e,"*")).join(","),n=N.keys.map(e=>'name:"'.concat(e,'"+')).join(" or "),t=(0,w.d)(a,n).all.map(e=>e.name);await M({keys:t,query:e})}},z=A(c),D={icon:"arrow_forward",title:"From failure",disabled:!z,tooltip:z?"Retry the pipeline run, skipping steps that completed successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>T.onClick(c,b.Fnt.FROM_FAILURE,e.shiftKey)};L||[P,O,D,$].forEach(e=>{e.disabled=!0,e.title="Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration."});let H=[J,O,P,$,D,R&&(null==(r=c.executionPlan)?void 0:r.assetSelection.length)?{icon:"arrow_forward",title:"From asset failure",disabled:!z,tooltip:z?"Retry the pipeline run, selecting only assets that did not complete successfully. Shift-click to adjust tags.":"Retry is only enabled when the pipeline has failed.",onClick:e=>T.onClick(c,b.Fnt.FROM_ASSET_FAILURE,e.shiftKey)}:null].filter(Boolean),K=N.present?P:z&&F?D:(null==E?void 0:E.present)?O:null,U=L&&K?K:J;return(0,s.jsxs)(i.Y,{direction:"row",spacing:8,children:[(0,s.jsx)(l.a,{flex:{direction:"row"},children:(0,s.jsx)(v.x,{runCount:1,primary:U,options:H,title:"*"===U.scope?"Re-execute all (*)":U.scope?"Re-execute (".concat(U.scope,")"):"Re-execute ".concat(U.title),tooltip:(null==f?void 0:f.tooltip)?null==f?void 0:f.tooltip:c.hasReExecutePermission?void 0:y.gZ,icon:null==f?void 0:f.icon,disabled:(null==f?void 0:f.disabled)||!c.hasReExecutePermission})}),d.RD.has(c.status)?null:(0,s.jsx)(_,{run:c}),T.launchpadElement]})},S=e=>{let{selection:n}=e;return(0,s.jsx)("div",{style:{paddingLeft:"10px"},children:((null==n?void 0:n.keys)||[]).map(e=>(0,s.jsx)("span",{style:{display:"block"},children:"* ".concat(e)},e))})}},36461:e=>{e.exports={listItem:"ListItem_listItem__hJcWe",listItemAnchor:"ListItem_listItemAnchor__kz7bK",checkboxContainer:"ListItem_checkboxContainer__iSFou",left:"ListItem_left__euMlC",right:"ListItem_right__IUgkP"}},56355:(e,n,t)=>{"use strict";t.r(n),t.d(n,{JobsRoot:()=>eX,default:()=>eB});var s=t(6029),r=t(83150),o=t(43697),i=t(3066),l=t(87931),a=t(75110),c=t(83007),d=t(33658),u=t(53451),p=t(55729),h=t(10740),x=t(49593);let m=e=>{let[n,t]=(0,x.m)({encode:n=>e.reduce((e,t)=>{let s=n[t];return e[t]=(null==s?void 0:s.length)?JSON.stringify(s):void 0,e},{}),decode:n=>{let t={};for(let s of e){let e=n[s];if(e&&"string"==typeof e)try{t[s]=JSON.parse(e)}catch{t[s]=[]}else t[s]=[]}return t}}),s=(0,p.useMemo)(()=>{let n={};return e.forEach(e=>{n["set".concat(e.charAt(0).toUpperCase()+e.slice(1))]=n=>{t(t=>({...t,[e]:n instanceof Function?n(t[e]):n}))}}),n},[e,t]);return{state:n,setState:t,setters:s}};var f=t(57638),j=t(40264),g=t(26277),y=t(21440),b=t(4984),v=t(10308),w=t(41185),C=t(4104),_=t(21983),I=t(9329),k=t(59541),A=t(42932),R=t(38584),S=t(41735),L=t(11665),N=t(21870),E=t(25909),F=t(85347),T=t(98394),M=t(9754),J=t(17970),O=t(83655),P=t(35029),$=t(23),z=t(90039),D=t(66822),H=t(36376),K=t(51249),U=t(30225);function V(){let e=(0,I._)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        status\n        pipelineName\n        tags {\n          key\n          value\n        }\n        executionPlan {\n          artifactsPersisted\n          assetSelection\n          ...ExecutionPlanToGraphFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return V=function(){return e},e}let Q=e=>{let{job:n,isAssetJob:t,repoAddress:r}=e,o=n.runs.length?n.runs[0]:null,i={pipelineName:n.name,repositoryName:r.name,repositoryLocationName:r.location},c=(0,$.Vw)(n.name),d=(0,K.Q)(),{permissions:{canLaunchPipelineReexecution:u,canLaunchPipelineExecution:h},disabledReasons:x}=(0,P.S2)(r.location),[m,f]=(0,F._l)(q),{data:g}=f,y=(0,p.useCallback)(()=>{(null==o?void 0:o.id)&&m({variables:{runId:o.id}})},[o,m]),b=(null==g?void 0:g.pipelineRunOrError.__typename)==="Run"?null==g?void 0:g.pipelineRunOrError:null,v="loading"===t?(0,s.jsx)(M.Dr,{icon:"execute",text:"Loading...",disabled:!0}):!0===t?(0,s.jsx)(M.Dr,{icon:c.loading?(0,s.jsx)(a.y,{purpose:"caption-text"}):"execute",text:"Launch new run",disabled:!h,onClick:e=>c.onClick(i,e)}):(0,s.jsx)(U.w,{icon:"execute",text:"Launch new run",disabled:!h,to:(0,E.HU)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob,path:"/playground"})}),w=(0,s.jsx)(M.Dr,{icon:"replay",text:"Re-execute latest run",disabled:!u||!b||!(0,H.yG)(b),onClick:e=>b?d.onClick(b,D.Fnt.ALL_STEPS,e.shiftKey):void 0}),C=(0,s.jsx)(M.Dr,{icon:"sync_problem",text:"Re-execute latest run from failure",disabled:!u||!b||!(0,H.gX)(b),onClick:e=>b?d.onClick(b,D.Fnt.FROM_FAILURE,e.shiftKey):void 0});return(0,s.jsxs)(s.Fragment,{children:[c.launchpadElement,d.launchpadElement,(0,s.jsx)(J.AM,{onOpened:()=>y(),content:(0,s.jsxs)(M.W1,{children:[(0,s.jsx)(U.w,{to:(0,E.HU)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,s.jsx)(U.w,{to:(0,E.HU)({repoName:r.name,repoLocation:r.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),h?v:(0,s.jsx)(j.m,{content:x.canLaunchPipelineExecution,display:"block",children:v}),u?w:(0,s.jsx)(j.m,{content:x.canLaunchPipelineReexecution,display:"block",children:w}),u?C:(0,s.jsx)(j.m,{content:x.canLaunchPipelineReexecution,display:"block",children:C})]}),position:"bottom-left",children:(0,s.jsx)(O.$n,{icon:(0,s.jsx)(l.In,{name:"more_horiz"}),intent:"none"})})]})},q=(0,F.J1)(V(),z.v);var G=t(5356),X=t(4585),B=t(92242),W=t(89250),Y=t(83669),Z=t(1410);function ee(){let e=(0,I._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return ee=function(){return e},e}let en="1.5fr 1fr 180px 96px 80px",et=(0,p.forwardRef)((e,n)=>{let{name:t,isJob:o,repoAddress:i,index:l}=e,a=(0,k.V)(100),c=(0,F.IT)(ei,{variables:{selector:(0,N.ee)(i,t)},skip:!a});(0,T.Bj)(c,T.eO);let{data:d}=c,u=(null==d?void 0:d.pipelineOrError.__typename)==="Pipeline"?null==d?void 0:d.pipelineOrError:void 0,{schedules:h,sensors:x}=(0,p.useMemo)(()=>{if(u){let{schedules:e,sensors:n}=u;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[u]),m=(0,p.useMemo)(()=>{if(u){let{runs:e}=u;if(e.length)return[...e]}return[]},[u]);return(0,s.jsx)("div",{"data-index":l,ref:n,children:(0,s.jsxs)(er,{border:"bottom",children:[(0,s.jsxs)(w.$4,{children:[(0,s.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:(0,s.jsx)(R.N_,{to:(0,E.HG)(i,"/jobs/".concat(t)),children:(0,s.jsx)(A.A,{text:t})})}),(0,s.jsx)(L.OZ,{children:(null==u?void 0:u.description)||""})]}),(0,s.jsx)(w.$4,{children:h.length||x.length?(0,s.jsx)(r.a,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,s.jsx)(eo,{children:(0,s.jsx)(X.L,{schedules:h,sensors:x,repoAddress:i})})}):(0,s.jsx)(L.ov,{queryResult:c})}),(0,s.jsx)(w.$4,{children:m[0]?(0,s.jsx)(G.A,{run:m[0],showButton:!1,showHover:!0,showSummary:!1,name:t}):(0,s.jsx)(L.ov,{queryResult:c})}),(0,s.jsx)(w.$4,{children:m.length?(0,s.jsx)(r.a,{padding:{top:4},children:(0,s.jsx)(B.$c,{jobName:t,runs:[...m].reverse(),fade:!0})}):(0,s.jsx)(L.ov,{queryResult:c})}),(0,s.jsx)(w.$4,{children:(0,s.jsx)(r.a,{flex:{justifyContent:"flex-end"},style:{marginTop:"-2px"},children:(0,s.jsx)(Q,{job:{name:t,isJob:o,runs:m},isAssetJob:u?u.isAssetJob:"loading",repoAddress:i})})})]})})}),es=()=>(0,s.jsxs)(w.Sy,{templateColumns:en,sticky:!0,children:[(0,s.jsx)(w.A3,{children:"Name"}),(0,s.jsx)(w.A3,{children:"Schedules/sensors"}),(0,s.jsx)(w.A3,{children:"Latest run"}),(0,s.jsx)(w.A3,{children:"Run history"}),(0,s.jsx)(w.A3,{})]}),er=(0,S.Ay)(r.a).withConfig({componentId:"sc-406796da-0"})(["display:grid;grid-template-columns:",";height:100%;"],en),eo=S.Ay.div.withConfig({componentId:"sc-406796da-1"})(["width:100%;> .bp5-popover-target{width:100%;}"]),ei=(0,F.J1)(ee(),W.vw,Y.M,Z.T);var el=t(12930),ea=t(75012),ec=t.n(ea);let ed=e=>{let{controls:n}=e;return(0,s.jsx)(r.a,{flex:{direction:"row",gap:8,alignItems:"center"},className:ec().container,children:n.map(e=>{let{key:n,control:t}=e;return t?(0,s.jsx)("div",{className:ec().item,children:t},n):null})})};var eu=t(58643),ep=t(71527),eh=t.n(ep);let ex=e=>(0,s.jsx)(eu.N,{...e,className:eh().button});var em=t(53112),ef=t(36461),ej=t.n(ef);let eg=e=>{if("number"==typeof e)return{top:e,right:e,bottom:e,left:e};let n=e.vertical||e.top||0,t=e.horizontal||e.right||0;return{top:n,right:t,bottom:e.vertical||e.bottom||0,left:e.horizontal||e.left||0}},ey=e=>{let{href:n,...t}=e;return(0,s.jsx)("a",{href:n,...t})},eb={vertical:12,horizontal:24},ev=(0,p.forwardRef)((e,n)=>{let{index:t,checked:r=!1,padding:o=eb,onToggle:i,href:l,renderLink:a,left:c,right:d}=e,{top:u,right:p,bottom:h,left:x}=eg(o);return(0,s.jsxs)("div",{className:ej().listItem,style:{"--spacing-top":"".concat(u,"px"),"--spacing-bottom":"".concat(h,"px"),"--spacing-left":"".concat(x,"px")},"data-index":t,ref:n,children:[i?(0,s.jsx)("div",{className:ej().checkboxContainer,children:(0,s.jsx)(em.S,{format:"check",checked:r,size:"small",onChange:e=>i(e.target.checked)})}):null,(null!=a?a:ey)({href:l,className:ej().listItemAnchor,children:c}),(0,s.jsx)("div",{style:{"--spacing-right":"".concat(p,"px")},className:ej().right,children:d})]})});var ew=t(74312),eC=t.n(ew),e_=t(20210),eI=t.n(e_);function ek(){let e=(0,I._)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        isAssetJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return ek=function(){return e},e}let eA=(0,F.J1)(ek(),W.vw,Y.M,Z.T);var eR=t(90161),eS=t(60845),eL=t(2925),eN=t(60288),eE=t(51350);eC().extend(eI());let eF=(0,p.forwardRef)((e,n)=>{let{index:t,name:o,isJob:i,repoAddress:a}=e,d=(0,k.V)(100),u=(0,F.IT)(eA,{variables:{selector:(0,N.ee)(a,o)},skip:!d});(0,T.Bj)(u,T.eO);let{data:h}=u,x=(null==h?void 0:h.pipelineOrError.__typename)==="Pipeline"?null==h?void 0:h.pipelineOrError:void 0,{schedules:m,sensors:f}=(0,p.useMemo)(()=>{if(x){let{schedules:e,sensors:n}=x;return{schedules:e,sensors:n}}return{schedules:[],sensors:[]}},[x]),g=(0,p.useMemo)(()=>{if(x){let{runs:e}=x;if(e.length)return[...e]}return[]},[x]);return(0,s.jsx)(ev,{ref:n,index:t,href:(0,E.HG)(a,"/jobs/".concat(o)),renderLink:e=>{let{href:n,...t}=e;return(0,s.jsx)(R.N_,{to:n||"#",...t})},left:(0,s.jsxs)(r.a,{flex:{direction:"row",gap:12,alignItems:"center"},children:[(0,s.jsxs)(r.a,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(l.In,{name:"job"}),o]}),(null==x?void 0:x.description)?(0,s.jsx)(j.m,{content:(0,s.jsx)("div",{style:{width:320},children:x.description}),placement:"top",children:(0,s.jsx)(l.In,{name:"info",color:c.XN()})}):null]}),right:(()=>{var e;return u.loading&&!u.data?(0,s.jsx)(el.E,{$width:200,$height:24}):(0,s.jsx)(ed,{controls:[{key:"latest-run",control:(null==(e=g[0])?void 0:e.startTime)?(0,s.jsx)(J.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(B._O,{run:g[0],name:o})}),hoverOpenDelay:100,children:(0,s.jsx)(ex,{children:(0,s.jsxs)(r.a,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(eS.lQ,{status:g[0].status}),(0,s.jsx)(eR.w,{unixTimestamp:g[0].startTime})]})})},g[0].id):null},{key:"schedules",control:m.length>0?(0,s.jsx)(eT,{type:"schedule",enabled:m.some(e=>"RUNNING"===e.scheduleState.status),automations:m,repoAddress:a}):null},{key:"sensors",control:f.length>0?(0,s.jsx)(eT,{type:"sensor",enabled:f.some(e=>"RUNNING"===e.sensorState.status),automations:f,repoAddress:a}):null},{key:"automations",control:0===f.length&&0===m.length?(0,s.jsx)(j.m,{content:"No automations",placement:"top",children:(0,s.jsx)(eT,{type:"none"})}):null},{key:"runs",control:(0,s.jsx)(r.a,{padding:{horizontal:8},children:(0,s.jsx)(B.$c,{jobName:o,runs:[...g].reverse(),fade:!0,forceCount:5})})},{key:"menu",control:(0,s.jsx)(Q,{job:{name:o,isJob:i,runs:g},isAssetJob:x?x.isAssetJob:"loading",repoAddress:a})}]})})()})}),eT=e=>{let{type:n,automations:t,enabled:o,repoAddress:i}=e,a=(0,s.jsx)(ex,{children:(0,s.jsx)(r.a,{padding:{vertical:2},children:"none"===n?(0,s.jsx)(l.In,{name:"status",color:c.fR()}):(0,s.jsx)(l.In,{name:n,color:o?c.P$():c.fR()})})});if("none"===n)return a;let d=(null==t?void 0:t.length)||0;return(0,s.jsx)(J.AM,{position:"top",interactionKind:"hover",content:(0,s.jsxs)(r.a,{flex:{direction:"column"},style:{width:320,overflowX:"hidden"},background:c.HU(),children:[(0,s.jsx)(r.a,{flex:{direction:"row",gap:8,alignItems:"center"},padding:{vertical:12,horizontal:12},border:"bottom",children:(0,s.jsx)("strong",{style:{fontSize:14},children:"sensor"===n?1===d?"1 sensor":"".concat(d," sensors"):1===d?"1 schedule":"".concat(d," schedules")})}),(0,s.jsx)("div",{style:{overflowY:"auto",maxHeight:240},children:(null==t?void 0:t.length)&&i?t.map((e,n)=>{let t="Sensor"===e.__typename?e.name:(0,eN.d)(e.cronSchedule,{longTimezoneName:e.executionTimezone||"UTC"});return(0,s.jsxs)(r.a,{flex:{direction:"row",gap:12,alignItems:"center",justifyContent:"space-between"},padding:12,border:0===n?null:"top",children:[(0,s.jsxs)(r.a,{flex:{direction:"row",alignItems:"center",gap:8},style:{width:"100%",overflow:"hidden"},children:[(0,s.jsx)(l.In,{name:"Schedule"===e.__typename?"schedule":"sensor"}),(0,s.jsx)(R.N_,{to:(0,E.HG)(i,"Schedule"===e.__typename?"/schedules/".concat(e.name):"/sensors/".concat(e.name)),style:{flex:1,overflow:"hidden",width:"100%"},children:(0,s.jsx)(A.A,{text:t})})]}),(0,s.jsx)(r.a,{flex:{direction:"row",alignItems:"center",gap:8},children:"Schedule"===e.__typename?(0,s.jsx)(eL.G,{schedule:e,repoAddress:i}):(0,s.jsx)(eE.z,{sensor:e,repoAddress:i})})]},e.id+"-"+n)}):(0,s.jsx)("div",{children:"No automations"})})]}),hoverOpenDelay:100,children:a})};var eM=t(67402);let eJ=e=>{var n,t;let{repos:r}=e,{flagUseNewObserveUIs:o}=(0,v.h)(),i=(0,p.useRef)(null),l=(0,p.useMemo)(()=>r.map(e=>{let{repoAddress:n}=e;return(0,eM.FC)(n)}),[r]),{expandedKeys:a,onToggle:c,onToggleAll:d}=(0,_.A)(b.i,l),u=(0,p.useMemo)(()=>{let e=[];return r.forEach(n=>{let{repoAddress:t,jobs:s}=n;e.push({type:"header",repoAddress:t,jobCount:s.length});let r=(0,eM.FC)(t);a.includes(r)&&s.forEach(n=>{let{isJob:s,name:r}=n;e.push({type:"job",repoAddress:t,isJob:s,name:r})})}),e},[r,a]),h=(0,C.F)(r.map(e=>{let{repoAddress:n}=e;return n.name})),x=(0,y.Te)({count:u.length,getScrollElement:()=>i.current,estimateSize:e=>{let n=u[e];return(null==n?void 0:n.type)==="header"?w.tc:64},overscan:10}),m=x.getTotalSize(),f=x.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(w.mc,{ref:i,children:[o?null:(0,s.jsx)(es,{}),(0,s.jsx)(w.Rp,{$totalHeight:m,children:(0,s.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY(".concat(null!=(t=null==(n=f[0])?void 0:n.start)?t:0,"px)")},children:f.map(e=>{let{index:n,key:t}=e,r=u[n];return"header"===r.type?(0,s.jsx)(L.ur,{repoAddress:r.repoAddress,ref:x.measureElement,index:n,onToggle:c,onToggleAll:d,expanded:a.includes((0,eM.FC)(r.repoAddress)),showLocation:h.has(r.repoAddress.name),rightElement:(0,s.jsx)(j.m,{content:1===r.jobCount?"1 job":"".concat(r.jobCount," jobs"),placement:"top",children:(0,s.jsx)(g.v,{children:r.jobCount})})},t):o?(0,s.jsx)(eF,{index:n,ref:x.measureElement,name:r.name,isJob:r.isJob,repoAddress:r.repoAddress},t):(0,s.jsx)(et,{index:n,ref:x.measureElement,name:r.name,isJob:r.isJob,repoAddress:r.repoAddress},t)})})})]})})};var eO=t(64814),eP=t(99333),e$=t(89861),ez=t(64201),eD=t(29745),eH=t(33763),eK=t(32497);let eU=["jobs","tags","codeLocations"],eV=()=>{let{allRepos:e,visibleRepos:n,loading:t,data:o}=(0,p.useContext)(eH.zp),i=e.length,h=(0,p.useMemo)(()=>{let e=Object.values(o).filter(e=>"WorkspaceLocationEntry"===e.__typename),t=(0,eP.p)(n);return eQ(e).filter(e=>{let{repoAddress:n}=e;return t.has((0,eM.FC)(n))})},[o,n]),x=(0,p.useMemo)(()=>h.flatMap(e=>e.jobs),[h]),{state:j,setters:g}=m(eU),y=(0,p.useMemo)(()=>({...j,codeLocations:j.codeLocations.map(e=>{let{name:n,location:t}=e;return(0,eK.t8)(n,t)})}),[j]),b=(0,eD.K)({codeLocations:y.codeLocations,setCodeLocations:g.setCodeLocations}),v=(0,ez.wj)({name:"Job",icon:"job",allValues:(0,p.useMemo)(()=>x.map(e=>({key:e.name,value:e.name,match:[e.name]})),[x]),renderLabel:e=>{let{value:n}=e;return(0,s.jsxs)(r.a,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(l.In,{name:"job"}),(0,s.jsx)(f.lO,{text:n})]})},getStringValue:e=>e,state:y.jobs,onStateChanged:(0,p.useCallback)(e=>{g.setJobs(Array.from(e))},[g])}),w=(0,p.useMemo)(()=>[b,v],[b,v]),{button:C,activeFiltersJsx:_}=(0,e$.R)({filters:w}),I=(0,p.useMemo)(()=>h.filter(e=>!y.codeLocations.length||y.codeLocations.includes(e.repoAddress)).map(e=>({...e,jobs:e.jobs.filter(e=>!y.jobs.length||!!y.jobs.includes(e.name))})).filter(e=>!!e.jobs.length),[h,y]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.a,{padding:{horizontal:24,vertical:8},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},border:"bottom",children:C}),_.length?(0,s.jsx)(r.a,{padding:{vertical:8,horizontal:24},border:"bottom",flex:{direction:"row",gap:8},children:_}):null,t&&!i?(0,s.jsx)(r.a,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,s.jsx)(u.V,{label:"Loading jobs…"})}):t?(0,s.jsx)(r.a,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(r.a,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(a.y,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:c.XN()},children:"Loading jobs…"})]})}):I.length?(0,s.jsx)(eJ,{repos:I}):(0,s.jsx)(r.a,{padding:{top:20},children:(0,s.jsx)(d.I,{icon:"search",title:"No jobs",description:h.length?"No jobs were found that match your filters":"No jobs were found in your definitions"})})]})},eQ=e=>{let n=e.map(e=>e.locationOrLoadError),t=[];for(let e of n)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let n of e.repositories){let{name:s,pipelines:r}=n,o=(0,eK.t8)(s,e.name),i=r.filter(e=>{let{name:n}=e;return!(0,h.$D)(n)});i.length>0&&t.push({repoAddress:o,jobs:i})}return(0,eO.K)(t)};var eq=t(32857),eG=t(56808);let eX=()=>((0,eq.b7)(),(0,eG.r)("Jobs"),(0,s.jsxs)(r.a,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(o.z,{title:(0,s.jsx)(i.M7,{children:"Jobs"})}),(0,s.jsx)(eV,{})]})),eB=eX},64814:(e,n,t)=>{"use strict";t.d(n,{K:()=>r});var s=t(67402);let r=e=>[...e].sort((e,n)=>{let t=(0,s.FC)(e.repoAddress),r=(0,s.FC)(n.repoAddress);return t.localeCompare(r)})},71527:e=>{e.exports={button:"HoverButton_button__q9NSN"}},75012:e=>{e.exports={container:"HorizontalControls_container__kalME",item:"HorizontalControls_item__n78mr"}},92242:(e,n,t)=>{"use strict";t.d(n,{$c:()=>j,_O:()=>g});var s=t(6029),r=t(83150),o=t(83007),i=t(17970),l=t(3066),a=t(41241),c=t(38584),d=t(41735),u=t(60845),p=t(28031),h=t(1546),x=t(89250),m=t(21897);let f=e=>{let{status:n,opacity:t=1}=e,r=p.Qc[n];return(0,s.jsx)(C,{$color:r,$opacity:t})},j=e=>{let{fade:n,jobName:t,runs:l,forceCount:a}=e,c=l.length,d=.8/Math.max(3,c),u=[...l];return a&&(a>u.length?u.unshift(...Array(a-u.length).fill(null)):u=u.slice(0,a)),(0,s.jsx)(r.a,{flex:{direction:"row",alignItems:"center",gap:2},children:u.map((e,r)=>{let l=n?1-(c-r-1)*d:1;return e?(0,s.jsx)(i.AM,{position:"top",interactionKind:"hover",content:(0,s.jsx)("div",{children:(0,s.jsx)(g,{run:e,name:t})}),hoverOpenDelay:100,children:(0,s.jsx)(f,{runId:e.id,status:e.status,opacity:l},e.id)},e.id):(0,s.jsx)(C,{$color:o.HU(),$opacity:l},"empty-".concat(r))})})},g=e=>{let{name:n,run:t}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(b,{children:n}),(0,s.jsxs)(v,{children:[(0,s.jsxs)(r.a,{flex:{alignItems:"center",direction:"row",gap:8},children:[(0,s.jsx)(u.lQ,{status:t.status}),(0,s.jsx)(c.N_,{to:"/runs/".concat(t.id),children:(0,s.jsx)(l.MC,{children:(0,x.fb)(t)})})]}),(0,s.jsxs)(r.a,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(x.X4,{run:t}),(0,s.jsx)(x.D1,{run:t})]})]}),h.ev.has(t.status)||h.Tk.has(t.status)?(0,s.jsx)(w,{children:(0,s.jsx)(m.T,{runId:t.id})}):null]})},y=d.Ay.div.withConfig({componentId:"sc-fbd66c1b-0"})(["padding:4px;font-size:12px;width:240px;"]),b=d.Ay.div.withConfig({componentId:"sc-fbd66c1b-1"})(["padding:8px;box-shadow:inset 0 -1px ",";font-family:",";font-size:14px;font-weight:500;color:",";max-width:100%;text-overflow:ellipsis;overflow:hidden;min-width:0px;"],o.KH(),a.a.default,o.eg()),v=d.Ay.div.withConfig({componentId:"sc-fbd66c1b-2"})(["padding:8px;display:flex;align-items:flex-start;justify-content:space-between;"]),w=d.Ay.div.withConfig({componentId:"sc-fbd66c1b-3"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px 8px 8px;:empty{display:none;}"]),C=d.Ay.div.withConfig({componentId:"sc-fbd66c1b-4"})(["background-color:",";border-radius:2px;height:16px;opacity:",";width:8px;"],e=>{let{$color:n}=e;return n},e=>{let{$opacity:n}=e;return n})},99333:(e,n,t)=>{"use strict";t.d(n,{p:()=>o});var s=t(32497),r=t(67402);let o=e=>new Set(e.map(e=>(0,r.FC)((0,s.t8)(e.repository.name,e.repositoryLocation.name))))}}]);
//# sourceMappingURL=6355.47fc4aa3b719ac3f.js.map