"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6391],{16197:(e,t,s)=>{s.d(t,{Hw:()=>i,tU:()=>r});var n=s(66822);function r(e,t){return!e.endTimestamp&&(0!==t&&e.status===n.lsI.STARTED||1e3*e.timestamp<Date.now()-259200)}function i(e,t){return e.reduce((e,s)=>{if(s.type===t){var n;return e+((null==(n=s.partitionKeys)?void 0:n.length)||0)}return e},0)}},19281:(e,t,s)=>{s.d(t,{O:()=>g});var n=s(6029),r=s(26277),i=s(49748),a=s(83007),l=s(40264),o=s(83150),d=s(96331),c=s(81506),u=s(41499),h=s(83655),x=s(55729),p=s(65421),m=s(66822);let g=e=>{let{tick:t,tickResultType:s,isStuckStarted:g}=e,[j,v]=(0,x.useState)(!1),f=(0,x.useMemo)(()=>{let e="materializations"===s?"materialization":"run";switch(t.status){case m.lsI.STARTED:return(0,n.jsx)(r.v,{intent:"primary",icon:g?void 0:"spinner",children:g?"In progress":"Evaluating"});case m.lsI.SKIPPED:let u=(0,n.jsx)(i.e,{fillColor:a.HU(),label:"materializations"===s?"0 materializations requested":"0 runs requested"});if("runKeys"in t&&t.runKeys.length){let e="".concat(t.runKeys.length," runs requested, but skipped because the runs already exist for the requested keys.");return(0,n.jsx)(l.m,{position:"right",content:e,children:u})}if("skipReason"in t&&t.skipReason)return(0,n.jsx)(l.m,{position:"right",content:t.skipReason,targetTagName:"div",children:u});return u;case m.lsI.FAILURE:return(0,n.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)(r.v,{intent:"danger",children:"Failure"}),t.error?(0,n.jsx)(d.v,{onClick:()=>{v(!0)},children:"View"}):null]});case m.lsI.SUCCESS:let h="materializations"===s?t.requestedAssetMaterializationCount:t.runIds.length,x=(0,n.jsxs)(r.v,{intent:"success",children:[h," ",e,(0,c.i)(h,"","s")," requested"]});if("runKeys"in t&&t.runKeys.length>t.runIds.length){let e="".concat(t.runKeys.length," runs requested, but ").concat(t.runKeys.length-t.runIds.length," skipped because the runs already exist for those requested keys.");return(0,n.jsx)(l.m,{position:"right",content:e,children:x})}return x}},[g,t,s]);return(0,n.jsxs)(n.Fragment,{children:[f,t.error?(0,n.jsxs)(u.lG,{isOpen:j,title:"Error",style:{width:"80vw"},children:[(0,n.jsx)(u.R4,{children:(0,n.jsx)(p.Bf,{error:t.error})}),(0,n.jsx)(u.Es,{topBorder:!0,children:(0,n.jsx)(h.$n,{intent:"primary",onClick:()=>{v(!1)},children:"Close"})})]}):null]})}},26391:(e,t,s)=>{s.r(t),s.d(t,{OverviewRoot:()=>tu,default:()=>th});var n=s(6029),r=s(3102),i=s(83655),a=s(83150),l=s(55729),o=s(75110),d=s(1806),c=s(93955),u=s(18106),h=s(87931),x=s(26277),p=s(83007),m=s(64959),g=s(9754),j=s(3066),v=s(21440),f=s(38584),y=s(41735),w=s(65421),b=s(98394),I=s(32857),C=s(2931),k=s(42384),A=s(10740),T=s(2581),S=s(58061),z=s(87871),R=s(15250),E=s(56808),M=s(49593),L=s(1613),N=s(41185),F=s(32497),q=s(25909);let D=e=>{let{Header:t,TabButton:s}=e;(0,I.b7)(),(0,E.r)("Overview | Assets");let{assets:r,query:i,error:u,loading:h}=(0,z.q$)(),x=(0,b.DG)({refresh:i,intervalMs:b.eO,leading:!0}),p=l.useMemo(()=>r?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let s=e.definition.groupName,n=e.definition.repository.name,r="".concat(s,"||").concat(n),i=t[r]||{groupName:s,repositoryName:n,assets:[]};i.assets.push(e),t[r]=i}),Object.values(t)}(r):[],[r]),[m,g]=(0,M.m)({queryKey:"q",encode:e=>({searchQuery:e?JSON.stringify(e):void 0}),decode:e=>{if("string"==typeof e.searchQuery)try{return JSON.parse(e.searchQuery)}catch{}return""}}),j=l.useMemo(()=>""===m?p:p.filter(e=>(e.groupName||$).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())),[p,m]),y=l.useMemo(()=>{var e;return null!=(e=j.flatMap(e=>e.assets.map(e=>e.key)))?e:[]},[j]);(0,C.YP)(y,"OverviewAssetsRoot");let k=l.useRef(null),A=(0,v.Te)({count:j.length,getScrollElement:()=>k.current,estimateSize:()=>82,overscan:5}),T=A.getTotalSize(),S=A.getVirtualItems();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,n.jsx)(t,{refreshState:x}),(0,n.jsxs)(a.a,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,n.jsx)(s,{selected:"assets"}),(0,n.jsx)(d.ks,{value:m,onChange:e=>{g(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,n.jsx)(a.a,{padding:{horizontal:24,vertical:16},border:"top",children:(0,n.jsx)(c.F,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,n.jsxs)(n.Fragment,{children:["Use the ",(0,n.jsx)(f.N_,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),h?(0,n.jsx)(a.a,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(o.y,{purpose:"page"})}):u?(0,n.jsx)(a.a,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(w.Bf,{error:u})}):(0,n.jsx)(a.a,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,n.jsxs)(N.mc,{ref:k,children:[(0,n.jsx)(P,{}),(0,n.jsx)(N.Rp,{$totalHeight:T,children:S.map(e=>{let{index:t,key:s,size:r,start:i}=e,a=j[t];return(0,n.jsx)(_,{start:i,height:r,group:a},s)})})]})})]})},O="5fr 1fr 1fr 1fr 1fr",P=()=>(0,n.jsxs)(N.Sy,{templateColumns:O,sticky:!0,children:[(0,n.jsx)(N.A3,{children:"Group name"}),(0,n.jsx)(N.A3,{children:"Missing"}),(0,n.jsx)(N.A3,{children:"Failed/Overdue"}),(0,n.jsx)(N.A3,{children:"In progress"}),(0,n.jsx)(N.A3,{children:"Materialized"})]}),$="Ungrouped Assets";function _(e){var t,s;let{height:r,start:i,group:d}=e,c=l.useMemo(()=>d.assets.map(e=>({path:e.key.path})),[d.assets]),{liveDataByNode:m}=(0,C.YP)(c),g=l.useMemo(()=>(0,T.I)(d.assets,m),[m,d.assets]),j=null==(s=d.assets.find(e=>{var t;return null==(t=e.definition)?void 0:t.repository}))||null==(t=s.definition)?void 0:t.repository,v=(0,F.t8)((null==j?void 0:j.name)||"",(null==j?void 0:j.location.name)||""),{containerProps:y,viewport:w}=(0,u.k)(),b=c.length!==Object.keys(m).length,I=b?"":"0";return(0,n.jsx)(N.fI,{$height:r,$start:i,children:(0,n.jsxs)(U,{border:"bottom",children:[(0,n.jsx)(K,{children:(0,n.jsxs)(a.a,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,n.jsxs)(a.a,{flex:{direction:"column",gap:2,grow:1},children:[(0,n.jsxs)(a.a,{flex:{direction:"row",gap:8},children:[(0,n.jsx)(h.In,{name:"asset_group"}),d.groupName?(0,n.jsx)(f.N_,{style:{fontWeight:700},to:(0,q.HG)(v,"/asset-groups/".concat(d.groupName)),children:d.groupName}):$]}),(0,n.jsx)("div",{...y,children:(0,n.jsx)(H,{maxWidth:w.width,children:(0,n.jsx)(L.p,{repoAddress:v,showRefresh:!1})})})]}),(0,n.jsx)(a.a,{flex:{direction:"column",justifyContent:"center"},children:b?(0,n.jsx)(o.y,{purpose:"body-text"}):null})]})}),(0,n.jsx)(K,{children:g.missing.length?(0,n.jsx)(X,{assets:g.missing,getCount:e=>{let{status:t}=e;return t.case===k.zW.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,n.jsx)(x.v,{intent:"none",children:(0,n.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(p.hN()),borderRadius:"50%"}}),g.missing.length]})})}):I}),(0,n.jsx)(K,{children:g.failed.length?(0,n.jsx)(X,{assets:g.failed,getCount:e=>{let{status:t}=e;return t.case===k.zW.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,n.jsx)(x.v,{intent:"danger",children:(0,n.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),g.failed.length]})})}):I}),(0,n.jsx)(K,{children:g.inprogress.length?(0,n.jsx)(X,{assets:g.inprogress,getCount:e=>{let{status:t}=e;return t.case===k.zW.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,n.jsx)(x.v,{intent:"primary",icon:"spinner",children:g.inprogress.length})}):I}),(0,n.jsx)(K,{children:g.successful.length?(0,n.jsx)(X,{assets:g.successful,getCount:e=>{let{status:t}=e;return t.case===k.zW.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,n.jsx)(x.v,{intent:"success",children:(0,n.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{backgroundColor:p.P$(),width:"10px",height:"10px",borderRadius:"50%"}}),g.successful.length]})})}):I})]})})}let U=(0,y.Ay)(a.a).withConfig({componentId:"sc-b5f7f4f2-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],O),K=e=>{let{children:t}=e;return(0,n.jsx)(N.$4,{style:{color:p.eg()},children:(0,n.jsx)(a.a,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},H=y.Ay.div.withConfig({componentId:"sc-b5f7f4f2-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],p.XN(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function X(e){let{assets:t,children:s,getCount:r,adjective:i}=e;return(0,n.jsx)(W,{children:(0,n.jsx)(m.l,{items:t,itemPredicate:(e,t)=>(0,A.mt)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=r(e);return(0,n.jsx)(B,{to:(0,R.Q)(e.asset.key),target:"_blank",children:(0,n.jsx)(g.Dr,{text:(0,n.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,n.jsx)("div",{style:{paddingLeft:"4px"},children:(0,n.jsx)(h.In,{name:"asset"})}),(0,n.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,A.mt)(e.asset.key)}),t&&t>0?(0,n.jsxs)(j.HL,{style:{color:p.XN()},children:[(0,S.Xx)(t)," ",i]}):null]})},(0,A.mt)(e.asset.key))})},onItemSelect:()=>{},children:s})})}let W=y.Ay.div.withConfig({componentId:"sc-b5f7f4f2-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),B=(0,y.Ay)(f.N_).withConfig({componentId:"sc-b5f7f4f2-3"})(["&:hover{text-decoration:none;}"]);var G=s(43697),Q=s(10739),Z=s(44263),J=s(30466),V=s(10293),Y=s(20574),ee=s(85725);let et=e=>{let{refreshState:t,tab:s}=e,r=(0,Y.Aw)(),i=(0,V.I)(),{enableAssetHealthOverviewPreview:d}=(0,l.useContext)(J.W),c=(0,Q.i)();return(0,n.jsxs)(a.a,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,n.jsxs)(Z.tU,{selectedTabId:s,children:[(0,n.jsx)(ee.s,{id:"activity",title:"Timeline",to:"/overview/activity"}),d&&(0,n.jsx)(ee.s,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),"has-global-amp"!==i||c?null:(0,n.jsx)(ee.s,{id:"amp",title:(0,n.jsxs)(a.a,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,n.jsx)("div",{children:"Auto-materialize"}),r.loading?(0,n.jsx)(o.y,{purpose:"body-text"}):(0,n.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===r.paused?p.iZ():p.fR()}})]}),to:"/overview/automation"}),(0,n.jsx)(ee.s,{id:"resources",title:"Resources",to:"/overview/resources"})]}),t?(0,n.jsx)(a.a,{style:{alignSelf:"center"},children:(0,n.jsx)(b.D7,{refreshState:t})}):null]})},es=e=>{let{tab:t,queryData:s,refreshState:r,...i}=e;return(0,Q.i)()?null:(0,n.jsx)(G.z,{tabs:(0,n.jsx)(a.a,{flex:{direction:"column",gap:8},children:(0,n.jsx)(et,{tab:t,queryData:s,refreshState:r})}),...i})};var en=s(62842),er=s(11810),ei=s(27235),ea=s(35171);let el=(0,y.Ay)(ea.A).withConfig({componentId:"sc-3b34d0e7-0"})(["color:",";&&:hover{color:",";}",""],p.XN(),p.XN(),e=>{let{$active:t}=e;return t?(0,y.AH)(["background-color:",";color:",";&&:hover{background-color:",";color:",";}"],p.X_(),p.eg(),p.X_(),p.eg()):(0,y.AH)(["background-color:",";"],p.Tr())}),eo=()=>{(0,E.r)("Overview | Activity");let e=l.useCallback(e=>{let{refreshState:t}=e;return(0,n.jsx)(es,{tab:"activity",refreshState:t})},[]),[t,s]=(0,ei.S)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:o}=l.useContext(J.W),d=o?"timeline":t,c=l.useCallback(e=>{let{selected:t}=e;return o?null:(d!==t&&s(t),(0,n.jsxs)(i.dQ,{children:[(0,n.jsx)(el,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,n.jsx)(el,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[d,s,o]);return(0,n.jsx)(a.a,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,n.jsxs)(r.dO,{children:[!o&&(0,n.jsx)(er.q,{path:"/overview/activity/assets",children:(0,n.jsx)(D,{Header:e,TabButton:c})}),(0,n.jsx)(er.q,{path:"/overview/activity/timeline",children:(0,n.jsx)(en.j,{Header:e,TabButton:c})}),(0,n.jsx)(er.q,{path:"*",isNestingRoute:!0,render:l.useCallback(()=>"timeline"===d?(0,n.jsx)(r.rd,{to:"/overview/activity/timeline"}):(0,n.jsx)(r.rd,{to:"/overview/activity/assets"}),[d])})]})})};var ed=s(9329),ec=s(33658),eu=s(40264),eh=s(4984),ex=s(42932),ep=s(22940);let em="1.5fr 1fr 1fr",eg=e=>{let{name:t,description:s,repoAddress:r,start:i,height:l,resourceType:o,parentResources:d,jobsOpsUsing:c,assetKeysUsing:u,schedulesUsing:x,sensorsUsing:m}=e,g=(0,ep.H)(o),v=d.length+c.length+u.length+x.length+m.length;return(0,n.jsx)(N.fI,{$height:l,$start:i,children:(0,n.jsxs)(ev,{border:"bottom",children:[(0,n.jsx)(N.$4,{children:(0,n.jsxs)(a.a,{flex:{direction:"column",gap:4},children:[(0,n.jsxs)(a.a,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,n.jsx)(h.In,{name:"resource",color:p.fR()}),(0,n.jsx)("span",{style:{fontWeight:500},children:(0,n.jsx)(f.N_,{to:(0,q.HG)(r,"/resources/".concat(t)),children:(0,n.jsx)(ex.A,{text:t})})})]}),(0,n.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,n.jsx)(j.HL,{style:{color:p.XN(),whiteSpace:"nowrap"},children:s})})]})}),(0,n.jsx)(N.$4,{children:(0,n.jsx)(eu.m,{content:o,children:(0,n.jsx)(j.Kp,{children:g})})}),(0,n.jsx)(N.$4,{children:(0,n.jsx)(f.N_,{to:(0,q.HG)(r,"/resources/".concat(t,"/uses")),children:v})})]})})},ej=()=>(0,n.jsxs)(N.Sy,{templateColumns:em,sticky:!0,children:[(0,n.jsx)(N.A3,{children:"Name"}),(0,n.jsx)(N.A3,{children:"Type"}),(0,n.jsx)(N.A3,{children:"Uses"})]}),ev=(0,y.Ay)(a.a).withConfig({componentId:"sc-6af8490b-0"})(["display:grid;grid-template-columns:",";height:100%;"],em);var ef=s(4104),ey=s(21983),ew=s(11665),eb=s(67402);let eI=e=>{let{repos:t}=e,s=(0,l.useRef)(null),r=(0,l.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,eb.FC)(t)}),[t]),{expandedKeys:i,onToggle:a,onToggleAll:o}=(0,ey.A)(eh.i,r),d=(0,l.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:s,resources:n}=t;e.push({type:"header",repoAddress:s,resourceCount:n.length});let r=(0,eb.FC)(s);i.includes(r)&&n.forEach(t=>{e.push({type:"resource",repoAddress:s,...t})})}),e},[t,i]),c=(0,ef.F)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,v.Te)({count:d.length,getScrollElement:()=>s.current,estimateSize:e=>{let t=d[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(N.mc,{ref:s,children:[(0,n.jsx)(ej,{}),(0,n.jsx)(N.Rp,{$totalHeight:h,children:p.map(e=>{let{index:t,key:s,size:r,start:l}=e,u=d[t];return"header"===u.type?(0,n.jsx)(ew.ji,{repoAddress:u.repoAddress,height:r,start:l,onToggle:a,onToggleAll:o,expanded:i.includes((0,eb.FC)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,n.jsx)(eu.m,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,n.jsx)(x.v,{children:u.resourceCount})})},s):(0,n.jsx)(eg,{height:r,start:l,...u},s)})})]})})};var eC=s(64814),ek=s(99333),eA=s(85347),eT=s(25217),eS=s(92815),ez=s(98905),eR=s(59541);let eE=e=>{let{tooltipContent:t}=e;return(0,eR.V)(2e3)?(0,n.jsx)(a.a,{margin:{top:1},children:(0,n.jsx)(eu.m,{placement:"top",canShow:!!t,content:t||"",children:(0,n.jsx)(o.y,{purpose:"body-text"})})}):null};var eM=s(15349);function eL(){let e=(0,ed._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return eL=function(){return e},e}let eN=()=>{(0,I.b7)(),(0,E.r)("Overview | Resources");let{allRepos:e,visibleRepos:t,loadingNonAssets:s,data:r}=(0,l.useContext)(eM.zp),[i,c]=(0,M.m)({queryKey:"search",defaults:{search:""}}),u=e.length,h=(0,eA.IT)(eq,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:x,loading:m}=h,g=(0,b.Bj)(h,b.eO),j=(0,l.useMemo)(()=>{let e=(0,ek.p)(t),s=Object.values(r).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=null==x?void 0:x.workspaceOrError;return eF((null==n?void 0:n.__typename)==="Workspace"?n.locationEntries:s).filter(t=>{let{repoAddress:s}=t;return e.has((0,eb.FC)(s))})},[r,x,t]),v=!x&&m&&s,f=i.trim().toLocaleLowerCase(),y=f.length>0,w=(0,l.useMemo)(()=>{let e=f.toLocaleLowerCase();return j.map(t=>{let{repoAddress:s,resources:n}=t;return{repoAddress:s,resources:n.filter(t=>{let{name:s}=t;return s.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[j,f]),C=m&&!x;return(0,n.jsxs)(a.a,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"resources",refreshState:g}),(0,n.jsxs)(a.a,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,n.jsx)(eS.X,{}):null,(0,n.jsx)(d.ks,{icon:"search",value:i,rightElement:C?(0,n.jsx)(eE,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>c(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),v&&!u?(0,n.jsx)(a.a,{padding:64,children:(0,n.jsx)(o.y,{purpose:"page"})}):(()=>{if(v)return(0,n.jsx)(a.a,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(a.a,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(o.y,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.XN()},children:"Loading resources…"})]})});let s=e.length>t.length;return w.length?(0,n.jsx)(eI,{repos:w}):y?(0,n.jsx)(a.a,{padding:{top:20},children:(0,n.jsx)(ec.I,{icon:"search",title:"No matching resources",description:s?(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:i})," were found in your definitions"]})})}):(0,n.jsx)(a.a,{padding:{top:20},children:(0,n.jsx)(ec.I,{icon:"search",title:"No resources",description:s?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},eF=e=>{let t=e.map(e=>e.locationOrLoadError),s=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,allTopLevelResourceDetails:r}=t,i=(0,F.t8)(n,e.name);r.length>0&&s.push({repoAddress:i,resources:r})}return(0,eC.K)(s)},eq=(0,eA.J1)(eL(),eT.z,ez.z);var eD=s(78046),eO=s(28264),eP=s(56329),e$=s(53112);function e_(){let e=(0,ed._)(["\n  fragment AssetDaemonTickFragment on InstigationTick {\n    id\n    timestamp\n    endTimestamp\n    status\n    instigationType\n    error {\n      ...PythonErrorFragment\n    }\n    requestedAssetKeys {\n      path\n    }\n    requestedAssetMaterializationCount\n    autoMaterializeAssetEvaluationId\n    requestedMaterializationsForAssets {\n      assetKey {\n        path\n      }\n      partitionKeys\n    }\n  }\n\n  ","\n"]);return e_=function(){return e},e}function eU(){let e=(0,ed._)(["\n  query AssetDaemonTicksQuery(\n    $dayRange: Int\n    $dayOffset: Int\n    $statuses: [InstigationTickStatus!]\n    $limit: Int\n    $cursor: String\n    $beforeTimestamp: Float\n    $afterTimestamp: Float\n  ) {\n    autoMaterializeTicks(\n      dayRange: $dayRange\n      dayOffset: $dayOffset\n      statuses: $statuses\n      limit: $limit\n      cursor: $cursor\n      beforeTimestamp: $beforeTimestamp\n      afterTimestamp: $afterTimestamp\n    ) {\n      id\n      ...AssetDaemonTickFragment\n    }\n  }\n\n  ","\n"]);return eU=function(){return e},e}let eK=(0,eA.J1)(e_(),eT.z),eH=(0,eA.J1)(eU(),eK);var eX=s(41499),eW=s(71421),eB=s(66822),eG=s(23496),eQ=s(45050),eZ=s(84003);let eJ=(0,l.memo)(e=>{let{tick:t,isOpen:s,close:r}=e;return(0,n.jsx)(eZ.ZN,{isOpen:s,setIsOpen:r,height:400,header:(0,n.jsx)(eX.c7,{label:t?(0,n.jsx)("div",{children:(0,n.jsx)(eW.D,{timestamp:{unix:t.timestamp},timeFormat:{showTimezone:!0}})}):""}),content:(0,n.jsxs)("div",{style:{display:"grid",gridTemplateRows:"auto auto minmax(0, 1fr)",height:"100%"},children:[(0,n.jsx)(a.a,{padding:{vertical:12,horizontal:24},border:"bottom",children:t?(0,n.jsx)(eG.Z,{tick:t,tickResultType:"materializations"}):null}),(null==t?void 0:t.status)===eB.lsI.STARTED?null:(0,n.jsx)(eQ.I,{tick:t})]})})});var eV=s(96331),eY=s(42247),e0=s(6965),e1=s(19281);let e2=e=>{let{loading:t,ticks:s,tickStatus:r,setTickStatus:i,setSelectedTick:l,paginationProps:d,actionBarComponents:c}=e;return(0,n.jsxs)(a.a,{children:[(0,n.jsxs)(a.a,{flex:{justifyContent:"space-between",alignItems:"center"},padding:{vertical:12,horizontal:24},margin:{top:32},border:"top",children:[(0,n.jsxs)(a.a,{flex:{direction:"row",gap:8,alignItems:"center"},children:[c,!t||(null==s?void 0:s.length)?null:(0,n.jsx)(o.y,{purpose:"body-text"})]}),(0,n.jsx)(e5,{status:r,onChange:i})]}),(0,n.jsxs)(e8,{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,n.jsx)("th",{style:{width:90},children:"Status"}),(0,n.jsx)("th",{style:{width:90},children:"Duration"}),(0,n.jsx)("th",{style:{width:180},children:"Result"})]})}),(0,n.jsx)("tbody",{children:s.map((e,t)=>{let s=0!==t&&e.status===eB.lsI.STARTED&&!d.hasPrevCursor;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(eW.D,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}})}),(0,n.jsx)("td",{children:(0,n.jsx)(e1.O,{tick:e,tickResultType:"materializations",isStuckStarted:s})}),(0,n.jsx)("td",{children:s?" - ":(0,n.jsx)(e0.W,{startUnix:e.timestamp,endUnix:e.endTimestamp})}),(0,n.jsx)("td",{children:[eB.lsI.SKIPPED,eB.lsI.SUCCESS].includes(e.status)?(0,n.jsx)(eV.v,{onClick:()=>{l(e)},children:(0,n.jsxs)(j.jz,{children:[e.requestedAssetMaterializationCount," materializations requested"]})}):" - "})]},e.id)})})]}),(0,n.jsx)("div",{style:{paddingBottom:"16px"},children:(0,n.jsx)(eY.zC,{...d})})]})};var e4=function(e){return e.ALL="all",e.FAILED="failed",e.SUCCESS="success",e}({});let e3={all:[eB.lsI.SUCCESS,eB.lsI.FAILURE,eB.lsI.STARTED,eB.lsI.SKIPPED],failed:[eB.lsI.FAILURE],success:[eB.lsI.SUCCESS]},e6=[{key:"all",label:"All ticks"},{key:"success",label:"Requested"},{key:"failed",label:"Failed"}],e5=e=>{let{status:t,onChange:s}=e,r=e6.find(e=>{let{key:s}=e;return s===t});return(0,n.jsx)(m.l,{popoverProps:{position:"bottom-right"},filterable:!1,activeItem:r,items:e6,itemRenderer:(e,t)=>(0,n.jsx)(g.Dr,{active:t.modifiers.active,onClick:t.handleClick,text:e.label,style:{width:"300px"}},e.key),onItemSelect:e=>s(e.key),children:(0,n.jsx)(i.$n,{rightIcon:(0,n.jsx)(h.In,{name:"arrow_drop_down"}),style:{minWidth:"200px",display:"flex",justifyContent:"space-between"},children:null==r?void 0:r.label})})},e8=(0,y.Ay)(eP.X).withConfig({componentId:"sc-1b725a66-0"})(["th,td{vertical-align:middle !important;}"]);var e9=s(35016);let e7=e=>{var t,s;let{setSelectedTick:r,setTimerange:i,setParentStatuses:a,actionBarComponents:o}=e,[d,c]=(0,M.m)({queryKey:"status",defaults:{status:e4.ALL}}),u=(0,l.useMemo)(()=>e3[d]||e3[e4.ALL],[d]),{queryResult:h,paginationProps:x}=(0,e9.r)({query:eH,variables:{statuses:(0,l.useMemo)(()=>Array.from(u),[u])},nextCursorForResult:e=>{var t;let s=e.autoMaterializeTicks;if(s.length)return null==(t=s[14])?void 0:t.id},getResultArray:e=>(null==e?void 0:e.autoMaterializeTicks)?e.autoMaterializeTicks:[],pageSize:15});return(0,b.Bj)(h,1e4,!x.hasPrevCursor),(0,l.useEffect)(()=>{if(x.hasPrevCursor){var e,t,s;let n=null==(e=h.data)?void 0:e.autoMaterializeTicks;if(n&&n.length){let e=null==(t=n[n.length-1])?void 0:t.timestamp,r=null==(s=n[0])?void 0:s.endTimestamp;e&&r&&i([e,r])}}else i(void 0)},[x.hasPrevCursor,null==(t=h.data)?void 0:t.autoMaterializeTicks,i]),(0,l.useEffect)(()=>{x.hasPrevCursor?a(Array.from(u)):a(void 0)},[x.hasPrevCursor,a,u]),(0,n.jsx)(e2,{loading:h.loading,ticks:(null==(s=h.data)?void 0:s.autoMaterializeTicks)||[],paginationProps:x,setSelectedTick:r,tickStatus:d,setTickStatus:c,actionBarComponents:o})};var te=s(71910),tt=s(35029),ts=s(93609),tn=s(16197),tr=s(63510);let ti={tags:[{key:"dagster/auto_materialize",value:"true"}]},ta=()=>{var e;let t=(0,Y.Aw)(),s=(0,te.Z)(),{permissions:{canToggleAutoMaterialize:r}={}}=(0,tt.hS)(),[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(void 0),[h,x]=(0,l.useState)(void 0),m=(0,l.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return h||c?{afterTimestamp:null==h?void 0:h[0],beforeTimestamp:null==h?void 0:h[1],statuses:c}:{afterTimestamp:(e-12e5)/1e3}},[c,h]),[g,v]=(0,eA._l)(eH),f=(0,l.useCallback)(async()=>await g({variables:m()}),[g,m]);(0,l.useEffect)(()=>{f()},[f]),(0,b.DG)({refresh:f,enabled:!i&&!h&&!c,intervalMs:2e3,leading:!0});let[y,w]=(0,l.useState)(null),[I,C]=(0,M.m)((0,l.useMemo)(()=>({queryKey:"view",decode:e=>{let{view:t}=e;return"runs"===t?"runs":"evaluations"},encode:e=>({view:e,cursor:void 0,statuses:void 0})}),[])),k=null!=(e=v.data)?e:v.previousData,A=(0,l.useMemo)(()=>(null==k?void 0:k.autoMaterializeTicks)||[],[k]),T=(0,l.useMemo)(()=>{var e;return null!=(e=null==A?void 0:A.map((e,t)=>{let s=A[t-1];if(s&&(0,tn.tU)(e,t)){let t={...e};return t.endTimestamp=s.timestamp,t.status=eB.lsI.FAILURE,t}return e}))?e:[]},[JSON.stringify(A.map(e=>"".concat(e.id,":").concat(e.status)))]),S=(0,l.useCallback)(e=>{d(!!e)},[d]),z=(0,n.jsx)(eO.e,{activeItems:new Set([I]),buttons:[{id:"evaluations",label:"Evaluations"},{id:"runs",label:"Runs"}],onClick:e=>{C(e)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eP.X,{children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Running"}),(0,n.jsx)("td",{children:t.loading?(0,n.jsx)(o.y,{purpose:"body-text"}):(0,n.jsx)(e$.S,{format:"switch",checked:!t.paused,disabled:!r,onChange:async e=>{let n=e.target.checked;n||await s({title:"Pause Auto-materializing?",description:"Pausing Auto-materializing will prevent new materializations triggered by an Auto-materializing policy."}),t.setPaused(!n)}})})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:"Evaluation frequency"}),(0,n.jsx)("td",{children:"~30s"})]})]})}),(0,n.jsx)(a.a,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,n.jsx)(j.Db,{children:"Evaluation timeline"})}),k?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ts.d,{ticks:T,tickResultType:"materializations",onHoverTick:S,onSelectTick:w,exactRange:h,timeRange:12e5,tickGrid:3e5,timeAfter:18e4}),(0,n.jsx)(eJ,{tick:y,isOpen:!!y,close:()=>{w(null)}}),"evaluations"===I?(0,n.jsx)(e7,{setSelectedTick:w,setParentStatuses:u,setTimerange:x,actionBarComponents:z}):(0,n.jsx)(a.a,{margin:{top:32},border:"top",children:(0,n.jsx)(tr.U,{filter:ti,actionBarComponents:z,includeRunsFromBackfills:!0})})]}):(0,n.jsxs)(a.a,{padding:{vertical:48},flex:{direction:"row",justifyContent:"center",gap:12,alignItems:"center"},children:[(0,n.jsx)(o.y,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.XN()},children:"Loading evaluations…"})]})]})};var tl=s(76655),to=s(92524);let td=()=>{let e=(0,V.I)();switch(e){case"unknown":return(0,n.jsx)("div",{});case"has-global-amp":return(0,n.jsx)(tc,{});case"has-sensor-amp":return(0,n.jsx)(r.rd,{to:"/automation"});default:(0,tl.dr)(e)}},tc=()=>{(0,I.b7)(),(0,E.r)("Automations | Auto-materialize");let e=(0,Q.i)();return(0,n.jsxs)(eD.Y,{children:[e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.z,{title:(0,n.jsx)(j.M7,{children:"Automation"})}),(0,n.jsx)(a.a,{padding:{horizontal:24},border:"bottom",children:(0,n.jsx)(to.M,{tab:"global-amp"})})]}):(0,n.jsx)(es,{tab:"amp"}),(0,n.jsx)(ta,{})]})},tu=()=>(0,n.jsxs)(r.dO,{children:[(0,n.jsx)(er.q,{path:"/overview/activity",isNestingRoute:!0,children:(0,n.jsx)(eo,{})}),(0,n.jsx)(er.q,{path:"/overview/jobs",render:()=>(0,n.jsx)(r.rd,{to:"/jobs"})}),(0,n.jsx)(er.q,{path:"/overview/schedules",render:()=>(0,n.jsx)(r.rd,{to:"/automation"})}),(0,n.jsx)(er.q,{path:"/overview/sensors",render:()=>(0,n.jsx)(r.rd,{to:"/automation"})}),(0,n.jsx)(er.q,{path:"/overview/automation",render:()=>(0,n.jsx)(td,{})}),(0,n.jsx)(er.q,{path:"/overview/backfills",exact:!0,render:()=>(0,n.jsx)(r.rd,{to:"/runs?view=backfills"})}),(0,n.jsx)(er.q,{path:"/overview/resources",children:(0,n.jsx)(eN,{})}),(0,n.jsx)(er.q,{path:"*",isNestingRoute:!0,render:()=>(0,n.jsx)(r.rd,{to:"/overview/activity"})})]}),th=tu},64814:(e,t,s)=>{s.d(t,{K:()=>r});var n=s(67402);let r=e=>[...e].sort((e,t)=>{let s=(0,n.FC)(e.repoAddress),r=(0,n.FC)(t.repoAddress);return s.localeCompare(r)})},78046:(e,t,s)=>{s.d(t,{Y:()=>n});let n=s(41735).Ay.div.withConfig({componentId:"sc-2cf5acf-0"})(["height:100%;overflow-y:auto;padding-bottom:64px;width:100%;"])},92524:(e,t,s)=>{s.d(t,{M:()=>u});var n=s(6029),r=s(44263),i=s(83150),a=s(75110),l=s(83007),o=s(10293),d=s(20574),c=s(85725);let u=e=>{let{tab:t}=e,s=(0,d.Aw)(),u=(0,o.I)();return(0,n.jsxs)(r.tU,{selectedTabId:t,children:[(0,n.jsx)(c.s,{id:"schedules-and-sensors",title:"Schedules and sensors",to:"/automation"}),"has-global-amp"===u?(0,n.jsx)(c.s,{id:"global-amp",title:(0,n.jsxs)(i.a,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,n.jsx)("div",{children:"Auto-materialize"}),s.loading?(0,n.jsx)(a.y,{purpose:"body-text"}):(0,n.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===s.paused?l.iZ():l.fR()}})]}),to:"/overview/automation"}):null]})}},93609:(e,t,s)=>{s.d(t,{d:()=>v});var n=s(6029),r=s(83007),i=s(18106),a=s(3066),l=s(40264),o=s(81506),d=s(74312),c=s.n(d),u=s(55729),h=s(41735),x=s(71421),p=s(16197),m=s(66822);s(763);let g={[m.lsI.SUCCESS]:r.P$(),[m.lsI.FAILURE]:r.Ld(),[m.lsI.STARTED]:r.vD(),[m.lsI.SKIPPED]:r.Wk()},j={[m.lsI.SUCCESS]:r.P7(),[m.lsI.FAILURE]:r.t6(),[m.lsI.STARTED]:r.NU(),[m.lsI.SKIPPED]:r.xC()},v=e=>{var t,s;let{ticks:r,tickResultType:o,onHoverTick:d,onSelectTick:c,exactRange:h,timeRange:m=3e5,tickGrid:g=6e4,timeAfter:j=6e4}=e,[v,T]=(0,u.useState)(Date.now()),[S,z]=(0,u.useState)(!1);(0,u.useEffect)(()=>{if(!S&&!h){let e=setInterval(()=>{T(Date.now())},100);return()=>clearInterval(e)}return()=>{}},[h,S]);let R=(null==h?void 0:h[1])?1e3*h[1]:v+j,E=(null==h?void 0:h[0])?1e3*h[0]:v-m,M=E<v&&v<R,L=R-E,{viewport:N,containerProps:F}=(0,i.k)(),q=(0,u.useMemo)(()=>r.filter(e=>!e.endTimestamp||1e3*e.endTimestamp>E).reverse(),[r,E]),D=(0,u.useMemo)(()=>q.map((e,t)=>{var s,n,r,i;let a=(s=1e3*e.timestamp,n=N.width,n*(s-E)/L),l=(r=(0,p.tU)(e,q.length-t-1)?e.timestamp:e.endTimestamp?1e3*e.endTimestamp:v,i=N.width,i*(r-E)/L);return{...e,width:Math.max(l-a,8),startX:a}}),[E,v,q,L,N.width]),O=Math.max((R-E)/25,g)/5,P=Math.ceil(E/O)*O,$=Math.ceil((R-P)/O),_=Math.ceil($/5),U=(0,u.useMemo)(()=>{let e=[];for(let n=0;n<$;n++){var t,s;let r=P+n*O;e.push({time:r,x:(t=r,s=N.width,s*(t-E)/L),showLabel:n%_==0})}return e},[$,P,O,N.width,E,L,_]);return(0,n.jsx)("div",{style:{marginRight:"8px"},children:(0,n.jsxs)("div",{...F,children:[(0,n.jsxs)(y,{children:[U.map(e=>(0,n.jsxs)(I,{style:{transform:"translateX(".concat(e.x,"px)")},children:[(0,n.jsx)(C,{}),e.showLabel?(0,n.jsx)(k,{children:(0,n.jsx)(a.HL,{children:(0,n.jsx)(x.D,{timestamp:{ms:e.time},timeFormat:{showSeconds:!0}})})}):null]},e.time)),D.map(e=>{var t,s;let r=null!=(s="materializations"!==o&&"runIds"in e?null==(t=e.runIds)?void 0:t.length:e.requestedAssetMaterializationCount)?s:0;return(0,n.jsx)(b,{style:{transform:"translateX(".concat(e.startX,"px)"),width:"".concat(e.width,"px")},status:e.status,onMouseEnter:()=>{d(e),z(!0)},onMouseLeave:()=>{d(),z(!1)},onClick:()=>{c(e)},children:(0,n.jsx)(l.m,{content:(0,n.jsx)(f,{tick:e,tickResultType:o}),children:(0,n.jsx)("div",{style:{width:e.width+"px",height:"80px"},children:r>0?r:null})})},e.id)}),M?(0,n.jsx)(A,{style:{transform:"translateX(".concat((t=v,s=N.width,s*(t-E)/L),"px)")}}):null]}),(0,n.jsx)(w,{})]})})},f=(0,u.memo)(e=>{let{tick:t,tickResultType:s}=e,i=(0,u.useMemo)(()=>{var e,n;return t.status===m.lsI.FAILURE?"Evaluation failed":t.status===m.lsI.STARTED?"Evaluating…":"materializations"!==s&&"runs"in t?"".concat((null==(e=t.runs)?void 0:e.length)||0," run").concat((0,o.i)(null==(n=t.runs)?void 0:n.length,"","s")," requested"):"".concat(t.requestedAssetMaterializationCount," materialization").concat((0,o.i)(t.requestedAssetMaterializationCount,"","s")," requested")},[t,s]),l=c()(1e3*t.timestamp),d=c()(t.endTimestamp?1e3*t.endTimestamp:Date.now()),h=l.to(d,!0);return(0,n.jsxs)("div",{children:[(0,n.jsx)(a.HL,{as:"div",children:(0,n.jsx)(x.D,{timestamp:{unix:t.timestamp},timeFormat:{showSeconds:!0}})}),(0,n.jsxs)(a.HL,{as:"div",children:[i," (",h,")"]}),t.status===m.lsI.STARTED?null:(0,n.jsx)(a.HL,{color:r.XN(),children:"Click for details"})]})}),y=h.Ay.div.withConfig({componentId:"sc-48a3a1a-0"})(["position:relative;height:100px;padding:10px 2px;border-bottom:1px solid ",";"],r.KH()),w=h.Ay.div.withConfig({componentId:"sc-48a3a1a-1"})(["height:24px;"]),b=h.Ay.div.withConfig({componentId:"sc-48a3a1a-2"})(["cursor:pointer;position:absolute;top:10px;height:80px;will-change:transform,width;border-radius:2px;div{place-content:center;display:grid;}color:",";",""],r.Tr(),e=>{let{status:t}=e;return"\n    background: ".concat(g[t],";\n    &:hover {\n      background: ").concat(j[t],";\n    }\n  ")}),I=h.Ay.div.withConfig({componentId:"sc-48a3a1a-3"})(["position:absolute;top:0;height:124px;will-change:transform;"]),C=h.Ay.div.withConfig({componentId:"sc-48a3a1a-4"})(["position:absolute;top:0;height:108px;width:1px;background:",";"],r.KH()),k=h.Ay.div.withConfig({componentId:"sc-48a3a1a-5"})(["height:16px;position:absolute;bottom:0;width:100px;margin-left:-24px;"]),A=h.Ay.div.withConfig({componentId:"sc-48a3a1a-6"})(["position:absolute;top:0;height:126px;width:2px;background:",";&:after{content:'Now';position:absolute;left:0;background:",";color:",";bottom:0;font-size:12px;padding:3px 4px;}"],r.Gu(),r.Gu(),r.C4())},99333:(e,t,s)=>{s.d(t,{p:()=>i});var n=s(32497),r=s(67402);let i=e=>new Set(e.map(e=>(0,r.FC)((0,n.t8)(e.repository.name,e.repositoryLocation.name))))}}]);
//# sourceMappingURL=6391.b1ebf24bf3dbb30e.js.map