"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2832],{21047:(e,n,t)=>{t.d(n,{A1:()=>N,Z1:()=>P});var o=t(9329),r=t(6029),s=t(55729),i=t(3102),a=t(99121),l=t(39678),p=t(86400),d=t(77439),h=t(85347),c=t(25217),u=t(32857),x=t(57141),m=t(10740),j=t(15250),g=t(56808),v=t(78351),f=t(72104),S=t(87104),I=t(21870);function y(){let e=(0,o._)(["\n  query PipelineExplorerRootQuery(\n    $snapshotPipelineSelector: PipelineSelector\n    $snapshotId: String\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    pipelineSnapshotOrError(\n      snapshotId: $snapshotId\n      activePipelineSelector: $snapshotPipelineSelector\n    ) {\n      ... on PipelineSnapshot {\n        id\n        name\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n            definition {\n              assetNodes {\n                id\n                ...GraphExplorerAssetNodeFragment\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return y=function(){return e},e}let N=()=>{(0,u.b7)();let e=(0,i.g)(),n=(0,d.iI)(e["0"]),{pipelineName:t,snapshotId:o}=n,s=(0,i.W6)(),a=(0,v.e)();return(0,g.r)("Snapshot: ".concat(t).concat(o?"@".concat(o.slice(0,8)):"")),(0,r.jsx)(P,{explorerPath:n,onChangeExplorerPath:(e,n)=>{s[n]("/snapshots/".concat((0,d.ZG)(e)))},onNavigateToSourceAssetNode:(e,n)=>{let{assetKey:t}=n,o=(0,j.Q)(t);e.metaKey?a(o):s.push((0,j.Q)(t))}})},P=e=>{var n;let{explorerPath:t,repoAddress:o}=e,i=(0,I.JJ)(o,t.pipelineName),[a,l]=(0,s.useState)({explodeComposites:null!=(n=t.explodeComposites)&&n,preferAssetRendering:!0}),p=!!i&&null!==i.externalJobSource;if((0,s.useEffect)(()=>(p!==a.isExternal&&l({...a,isExternal:p}),()=>{}),[p,a]),i&&i.isAssetJob&&a.preferAssetRendering){let n=(0,I.ee)(o||null,t.pipelineName);return(0,r.jsx)(x.uj,{options:a,setOptions:l,fetchOptions:{pipelineSelector:n},explorerPath:t,onChangeExplorerPath:e.onChangeExplorerPath,onNavigateToSourceAssetNode:e.onNavigateToSourceAssetNode,viewType:m.kh.JOB},t.pipelineName)}return(0,r.jsx)(b,{...e,options:a,setOptions:l})},b=e=>{let{explorerPath:n,repoAddress:t,onChangeExplorerPath:o,onNavigateToSourceAssetNode:s,isGraph:i=!1,options:d,setOptions:c}=e,u=n.opNames.slice(0,n.opNames.length-1),j=(0,I.ee)(t||null,n.pipelineName),g=(0,h.IT)(E,{variables:{snapshotPipelineSelector:n.snapshotId?void 0:j,snapshotId:n.snapshotId?n.snapshotId:void 0,rootHandleID:u.join("."),requestScopeHandleID:d.explodeComposites?void 0:u.join(".")}});return(0,r.jsx)(S.R,{queryResult:g,children:e=>{let{pipelineSnapshotOrError:h}=e;if("PipelineSnapshot"!==h.__typename)return(0,r.jsx)(p.s,{isGraph:i,result:h,repoAddress:t});let u=h.solidHandle,g=d.explodeComposites?(0,a.$)(h.solidHandles):h.solidHandles,v=h.solidHandles.some(e=>e.solid.definition.assetNodes.length>0);return d.preferAssetRendering&&v?(0,r.jsx)(x.uj,{options:d,setOptions:c,fetchOptions:{pipelineSelector:j},explorerPath:n,onChangeExplorerPath:o,onNavigateToSourceAssetNode:s,viewType:m.kh.JOB}):(0,r.jsx)(l.Uh,{options:d,setOptions:c,explorerPath:n,onChangeExplorerPath:o,container:h,repoAddress:t,handles:g,parentHandle:u||void 0,isGraph:i,getInvocations:e=>g.filter(n=>n.solid.definition.name===e).map(e=>({handleID:e.handleID}))})}})},E=(0,h.J1)(y(),f.U,l.G4,l.zO,l.wo,c.z)},32832:(e,n,t)=>{t.r(n),t.d(n,{SnapshotRoot:()=>N,default:()=>P});var o=t(6029),r=t(3102),s=t(21047),i=t(9329),a=t(26277),l=t(43697),p=t(3066),d=t(41241),h=t(44263),c=t(38584),u=t(85347),x=t(77439),m=t(85725),j=t(21870),g=t(25909);function v(){let e=(0,i._)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]);return v=function(){return e},e}let f=(0,u.J1)(v()),S=e=>{var n;let{activeTab:t="",explorerPath:r}=e,{pipelineName:s,snapshotId:i=""}=r,v=(0,x.ZG)({...r,opNames:[]}),S=(0,j.sZ)(s),I=null==S?void 0:S.pipelineSnapshotId,{data:y,loading:N}=(0,u.IT)(f,{variables:{snapshotId:i}});return(0,o.jsx)(l.z,{title:(0,o.jsx)(p.M7,{style:{fontFamily:d.a.monospace,fontSize:"16px"},children:null==(n=r.snapshotId)?void 0:n.slice(0,8)}),tags:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.v,{icon:"schema",children:["Snapshot of"," ",(0,o.jsx)(c.N_,{to:(0,g.KU)(r.pipelineName),children:r.pipelineName})]}),(()=>{var e;return N?(0,o.jsx)(a.v,{intent:"none",minimal:!0,children:"..."}):I&&(I===i||(null==y?void 0:y.pipelineSnapshotOrError.__typename)!=="PipelineSnapshot"||(null==y||null==(e=y.pipelineSnapshotOrError)?void 0:e.parentSnapshotId)===I)?(0,o.jsx)(a.v,{intent:"success",minimal:!0,children:"Current"}):(0,o.jsx)(a.v,{intent:"warning",minimal:!0,children:"Snapshot"})})()]}),tabs:(0,o.jsx)(h.tU,{selectedTabId:t,children:[{text:"Definition",pathComponent:"",href:"/snapshots/".concat(v)},{text:"Runs",pathComponent:"runs",href:"/snapshots/".concat(v,"runs")}].map(e=>{let{href:n,text:t,pathComponent:r}=e;return(0,o.jsx)(m.s,{id:r,title:t,to:n},t)})})})};var I=t(11810),y=t(76659);let N=()=>{let{pipelinePath:e,tab:n}=(0,r.g)(),t=(0,x.iI)(e);return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,o.jsx)(S,{activeTab:n,explorerPath:t}),(0,o.jsxs)(r.dO,{children:[(0,o.jsx)(I.q,{path:"/snapshots/:pipelinePath/runs",children:(0,o.jsx)(y.n,{})}),(0,o.jsx)(I.q,{path:"/snapshots/(/?.*)",children:(0,o.jsx)(s.A1,{})})]})]})},P=N},76659:(e,n,t)=>{t.d(n,{n:()=>H});var o=t(6029),r=t(58323),s=t(83150),i=t(26277),a=t(96331),l=t(55729),p=t(3102),d=t(77439),h=t(87931),c=t(33658),u=t(35171),x=t(21870),m=t(25909);let j=e=>{let{repoAddress:n,anyFilter:t,jobName:r,jobPath:i}=e,a=(0,x.GK)(n),l=(0,x.PO)(a,r),p=(0,x._z)(a,r);return(0,o.jsx)(s.a,{padding:{vertical:64},children:(0,o.jsx)(c.I,{icon:"run",title:"No runs found",description:n?p?(0,o.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this external job."}):l?(0,o.jsxs)(s.a,{flex:{direction:"column",gap:12},children:[(0,o.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,o.jsx)("div",{children:(0,o.jsx)(u.A,{icon:(0,o.jsx)(h.In,{name:"materialization"}),to:(0,m.HG)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,o.jsxs)(s.a,{flex:{direction:"column",gap:12},children:[(0,o.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,o.jsx)("div",{children:(0,o.jsx)(u.A,{icon:(0,o.jsx)(h.In,{name:"add_circle"}),to:(0,m.HG)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,o.jsx)("div",{children:"You have not launched any runs for this job."})})})};var g=t(76309),v=t(98394),f=t(32857),S=t(66822),I=t(61365),y=t(89250),N=t(27680),P=t(63510),b=t(36152),E=t(89010),A=t(67402);let C=["status","tag","id","created_date_before","created_date_after"],H=e=>{(0,f.b7)();let{pipelinePath:n}=(0,p.g)(),{repoAddress:t=null}=e,h=(0,d.iI)(n),{pipelineName:c,snapshotId:u}=h,m=(0,x.GK)(t),H=(0,x.Ji)(m,c);(0,g.J)(h,H);let[O,_]=(0,b.HB)(C),D=(0,l.useMemo)(()=>[H?{token:"job",value:c}:{token:"pipeline",value:c},u?{token:"snapshotId",value:u}:null].filter(Boolean),[H,c,u]),T=(0,l.useMemo)(()=>{let e=[...O,...D];if(t){let n={token:"tag",value:"".concat(I.d.RepositoryLabelTag,"=").concat((0,A.DV)(t))};e.push(n)}return{...(0,b.Us)(e),pipelineName:c,snapshotId:u}},[O,D,c,t,u]),k=(0,l.useCallback)(e=>{let n=(0,r.AY)(e);O.some(e=>(0,r.AY)(e)===n)||_([...O,e])},[O,_]),{entries:w,paginationProps:G,queryResult:F}=(0,E.A)({filter:T,skip:!1,view:S.ivR.RUNS}),R=(0,v.Bj)(F,v.eO),{button:$,activeFiltersJsx:J}=(0,b.QR)({enabledFilters:C,tokens:O,onChange:_,loading:F.loading}),q=(0,o.jsxs)(s.a,{flex:{direction:"row",gap:8,alignItems:"center"},style:{width:"100%"},padding:{right:16},children:[$,(0,o.jsx)("div",{style:{flex:1}}),(0,o.jsx)(v.D7,{refreshState:R})]}),z=(0,o.jsxs)(s.a,{flex:{direction:"row",gap:4,alignItems:"center"},children:[D.map(e=>{let{token:n,value:t}=e;return(0,o.jsx)(i.v,{children:"".concat(n,":").concat(t)},n)}),J,J.length>0&&(0,o.jsx)(a.v,{onClick:()=>_([]),children:"Clear all"})]});return(0,o.jsx)(y.rw.Provider,{value:{refetch:R.refetch},children:F.error?(0,o.jsx)(N.h,{error:F.error}):(0,o.jsx)("div",{style:{minHeight:0},children:(0,o.jsx)(P.V,{entries:w,loading:F.loading,onAddTag:k,refetch:R.refetch,actionBarComponents:q,belowActionBarComponents:z,paginationProps:G,filter:T,emptyState:()=>(0,o.jsx)(j,{repoAddress:t,anyFilter:O.length>0,jobName:c,jobPath:n})})})})}}}]);
//# sourceMappingURL=2832.92b4bdf6d2ec7ce8.js.map